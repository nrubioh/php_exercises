USE database_ex1;

DELIMITER //
CREATE TRIGGER update_active_driver
AFTER UPDATE
ON `driver`
FOR EACH ROW 
BEGIN 
    IF NEW.status = 1 THEN
        INSERT INTO `active_driver` (driver_id) VALUES (NEW.id);
    ELSE 
        DELETE FROM `active_driver` WHERE driver_id = NEW.id;
    END IF;
END //
DELIMITER ;

/* SELECT * FROM `driver`;
+----+-------+--------+---------------------+---------------------+
| id | name  | status | created_at          | updated_at          |
+----+-------+--------+---------------------+---------------------+
|  1 | Tolon |      0 | 2023-06-11 17:56:49 | 2023-06-11 17:56:49 |
|  2 | Eevee |      0 | 2023-06-11 17:56:49 | 2023-06-11 17:56:49 |
|  3 | Titin |      0 | 2023-06-11 17:56:49 | 2023-06-11 17:56:49 |
|  4 | Colis |      0 | 2023-06-11 17:56:49 | 2023-06-11 17:56:49 |
|  5 | Matis |      0 | 2023-06-11 17:56:49 | 2023-06-11 17:56:49 |
+----+-------+--------+---------------------+---------------------+

UPDATE `driver` SET status = 1 WHERE id=2; <----

SELECT * FROM `active_driver`;
+----+-----------+---------------------+---------------------+
| id | driver_id | created_at          | updated_at          |
+----+-----------+---------------------+---------------------+
|  2 |         2 | 2023-06-11 18:25:46 | 2023-06-11 18:25:46 |
+----+-----------+---------------------+---------------------+

SELECT * FROM `driver`;        
+----+-------+--------+---------------------+---------------------+
| id | name  | status | created_at          | updated_at          |
+----+-------+--------+---------------------+---------------------+
|  1 | Tolon |      0 | 2023-06-11 17:56:49 | 2023-06-11 17:56:49 |
|  2 | Eevee |      1 | 2023-06-11 17:56:49 | 2023-06-11 17:56:49 | <-----
|  3 | Titin |      0 | 2023-06-11 17:56:49 | 2023-06-11 17:56:49 |
|  4 | Colis |      0 | 2023-06-11 17:56:49 | 2023-06-11 17:56:49 |
|  5 | Matis |      0 | 2023-06-11 17:56:49 | 2023-06-11 17:56:49 |
+----+-------+--------+---------------------+---------------------+
*/